
version: "2.1"
services:

    redis:
      container_name: webcore-docker-redis
      image: redis:latest
      ports:
        - "6379:6379"

    mysql:
      image: mysql:latest
      container_name: webcore-docker-mysql
      volumes:
          - ./mysql:/var/lib/mysql-files
          - ./mysql:/docker-entrypoint-initdb.d
      ports:
       - "3306:3306"
      tty: true
      environment:
        - MYSQL_ROOT_PASSWORD=root

    web:
      image: sharnw/webcore-docker-apache
      container_name: webcore-docker-apache
      stdin_open: true
      tty: true
      links:
        - "redis"
        - "mysql"
      volumes:
        - ./web:/var/www/html
        - ./vhost:/etc/apache2/sites-enabled
        - ./cert:/etc/certs
        - ./log:/var/log/apache2
        - ./composer:/var/www/.composer
        - ./npm:/var/www/.npm
      ports:
       - "80:80"
       - "443:443"

